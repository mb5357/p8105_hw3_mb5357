---
title: "p8105_hw3_mb5357"
author: "Maria Beg"
date: "2025-10-07"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(p8105.datasets)
data("instacart")
```

## QUESTION 1

**Description of the Instacart Dataset**

The `instacart` dataset is a line-item level table of grocery orders from Instacart, where each row represents a single product in a single order.

The dataset contains 13,844,617 observations and 15 variables. 

Key variables include `order_id`, `product_id`, `user_id`, `add_to_cart_order` (position of the item in the cart), `reordered` (0/1), `order_dow` (day of week), and `order_hour_of_day`. Orders are categorized by `eval_set`, and user purchase history is captured via `order_number`. 

The dataset can be joined with metadata tables such as `products`, `aisles`, and `departments` using `product_id`. In this version of the dataset, all observations come from the "train" evaluation set. 

For example, user 112108 placed their 4th order on day 4 of the week at 10 AM. This order (order ID 1) contained eight products, including "Bulgarian Yogurt", "Organic Celery Hearts", and "Organic Hass Avocado". Each product appears in a separate row, with variables indicating the order in which the item was added to the cart (e.g., "Bulgarian Yogurt" was first), whether it was reordered (1 = yes, 0 = no), and what aisle and department it belongs to (e.g., "fresh fruits" in the "produce" department).


**Number of aisles and most ordered aisles**

```{r}

instacart |> 
  count(aisle, sort = TRUE) |>
  mutate(total_aisles = n()) |>
  relocate(total_aisles, .before = aisle)

```

*There are 134 aisles in total. Fresh vegetables and fresh fruits aisles are the most items ordered from.*


**Plot of items ordered per aisle**

```{r,  fig.width=10, fig.height=8}

instacart |>
  count(aisle, sort = TRUE) |>
  filter(n > 10000) |>
  mutate(aisle = reorder(aisle, n)) |>
  ggplot(aes(x = n, y = aisle)) +
  geom_col(fill = "steelblue") +
  labs(
    title = "Number of Items Ordered by Aisle",
    x = "Number of Items Ordered",
    y = "Aisle"
  ) +
  theme_minimal()

```

